---
layout: post
title: HacktheBox Usage Writeup
date: 2025-02-20 16:27 +0530
categories: [TOP_CATEGORIE, SUB_CATEGORIE]
tags: [TAG]     # TAG names should always be lowercase
---

# Information

| Title         | Details       |
| -------- |:--------:|
| Name         |Usage |
| Base Points	    | 20     |
| Difficulty| Easy      |
| OS | Linux|
| Release Date| 14 Apr 2024 |
| Retire Date | 10 Aug 2024 |



# Brief



# Reconnaissance

We will start with basic `nmap` scan

### Nmap

```bash
nmap -sC -sV 10.10.11.18
```

We get a bunch of Interesting Information

```bash
# Nmap 7.95 scan initiated Wed Feb 19 23:04:54 2025 as: /usr/lib/nmap/nmap --privileged -sCV -p 22,80 -oA usage.nmap 10.10.11.18
Nmap scan report for 10.10.11.18
Host is up (0.25s latency).

PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 8.9p1 Ubuntu 3ubuntu0.6 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   256 a0:f8:fd:d3:04:b8:07:a0:63:dd:37:df:d7:ee:ca:78 (ECDSA)
|_  256 bd:22:f5:28:77:27:fb:65:ba:f6:fd:2f:10:c7:82:8f (ED25519)
80/tcp open  http    nginx 1.18.0 (Ubuntu)
|_http-title: Did not follow redirect to http://usage.htb/
|_http-server-header: nginx/1.18.0 (Ubuntu)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
# Nmap done at Wed Feb 19 23:05:12 2025 -- 1 IP address (1 host up) scanned in 18.04 seconds

```

We have 2 services OpenSSH and Nginx running on there default ports which are 22(SSH), 80(HTTP)

We also notice that the the web server redirects to `usage.htb`

So we edit our `Host` file first

```bash
echo 10.10.11.18 usage.htb | sudo tee -a /etc/hosts
```

Now, that we have our host setup, letâ€™s browse and see what the website holds for usâ€¦

##### HTTP

Letâ€™s Start with `PORT 80`

We browse to `usage.htb` and land on a login page 

![Usage](/assets/img/post/hackthebox/usage/1.png)

We notice that we have the option to log in, register a new account, or navigate to the admin panel. The admin panel also redirects us to the admin.usage.htb domain, which we also add to our hosts file.

```bash
echo 10.10.11.18 admin.usage.htb | sudo tee -a /etc/hosts
```

Nvaigating to Admin page also presents with us a login page.

![Usage](/assets/img/post/hackthebox/usage/2.png)

We could also register an account for us on 

> http://usage.htb/registration

![Usage](/assets/img/post/hackthebox/usage/3.png)

We can login after registeration which present us with a blog page where there is nothing much to look

![Usage](/assets/img/post/hackthebox/usage/4.png)

But we have an Reset Password link on login page.

> http://usage.htb/forget-password

When we submit a valid email, such as the one we used to sign up our new account, we get the following response:

![Usage](/assets/img/post/hackthebox/usage/5.png)

whereas in for an invalid email, we get the following response: 

![Usage](/assets/img/post/hackthebox/usage/6.png)


Which indicates that we might be interacting with the database somehow so we cna definetly try fr SQL Injection over here.

Submit the email with following payload

```
test' or 1=1;-- - 
```

![Usage](/assets/img/post/hackthebox/usage/7.png)

In order to confirm our attack vector we input the email with following payload and get invalid email response

```
 test' or 1=2;-- - 
```
![Usage](/assets/img/post/hackthebox/usage/6.png)

# Enumeration

### SQL Injection (SQLi)

First, we intercept the password reset request with a web proxy like BurpSuite in order to understand the difference between a valid request and response.









# Resources

| Topic | Link|
|-------|-----|
|Docker| [Here](https://www.notsosecure.com/anatomy-of-a-hack-docker-registry/)|
|Bind Shell Tutorial|[Here](https://www.hackingtutorials.org/networking/hacking-netcat-part-2-bind-reverse-shells/)|
|Restic Docs|[Here](https://restic.readthedocs.io/en/latest/)|
|Restic Server|[Here](https://github.com/restic/rest-server/releases)

With this, we come to the end of the story of how I owned Usage ðŸ˜ƒ

Thank you for reading !!!

*I would love to hear about any suggestions or queries.*